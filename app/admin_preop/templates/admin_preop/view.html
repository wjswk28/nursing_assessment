{% extends "base.html" %}

{% block content %}


<div class="relative max-w-7xl mx-auto bg-white rounded-2xl shadow-lg border border-sky-100 py-6 px-8 mt-6 pb-20">

    <!-- 제목 -->
    <div class="flex items-center gap-2 mb-6">
        <i data-lucide="clipboard-check" class="w-7 h-7 text-sky-700"></i>
        <span class="text-sky-800 font-bold text-2xl">Check-List View</span>
    </div>

    <!-- 환자 기본 정보 (리스트 페이지 동일 2줄 박스) -->
    <div class="mb-10 bg-blue-50 border border-blue-200 rounded-xl p-6">

        <!-- 첫 번째 줄 : 헤더 -->
        <div class="grid grid-cols-7 text-center text-sm font-semibold text-sky-700 mb-3 whitespace-nowrap">
            <div>수술날짜</div>
            <div>등록번호</div>
            <div>이름</div>
            <div>성별</div>
            <div>나이</div>
            <div>수술명</div>
            <div>주치의</div>
        </div>

        <!-- 두 번째 줄 : 값 -->
        <div class="grid grid-cols-7 text-center text-sm font-semibold text-slate-800 whitespace-nowrap">

            <div>{{ patient.surgery_date }}</div>

            <div>{{ patient.patient_id }}</div>

            <div>{{ patient.name }}</div>

            <div>
                {% if patient.gender == "여" %}
                    <span class="bg-pink-100 text-pink-700 font-semibold px-3 py-1 rounded-full">여</span>
                {% else %}
                    <span class="bg-blue-100 text-blue-700 font-semibold px-3 py-1 rounded-full">남</span>
                {% endif %}
            </div>

            <div>{{ patient.age }}</div>

            <div>{{ patient.surgery_name }}</div>

            <div>{{ patient.doctor_name }}</div>

        </div>

    </div>

    
    {% set step_titles = {
        2: "기본 신체 정보 및 주 증상",
        3: "기저질환 평가",
        4: "복용약 및 과거 수술",
        5: "전신 및 기능 평가",
        6: "통증 및 멀미 평가",
        7: "치아 상태 평가",
        8: "음주 및 흡연 평가",
        9: "알레르기 및 가족력 평가"
    } %}

    <!-- STEP 2~9 4열 그리드 -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">

        {% for step in range(2, 10) %}
            <div class="border rounded-xl p-5 shadow bg-white">

                <h2 class="text-lg font-bold text-sky-700 mb-3
                        text-center border border-sky-200 bg-sky-50 
                        rounded-lg py-2 px-3 shadow-sm">
                    {{ step_titles[step] }}
                </h2>

                {% set saved = saved_data.get(step, {}) %}
                {% include "preop/partial/step_" ~ step ~ "_partial.html" %}

            </div>
        {% endfor %}

    </div>
    <a href="{{ url_for('admin_preop.preop_list') }}"
        class="absolute bottom-6 right-8
            bg-sky-600 hover:bg-sky-700
            text-white font-semibold
            px-5 py-3 rounded-xl shadow-lg
            transition-all duration-200 z-10">
        ← 리스트로 돌아가기
    </a>
</div>


{% endblock %}
